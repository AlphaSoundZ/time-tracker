import{d as I,r as m,o as k,t as w,s as S,a as l,c as r,b as t,F as p,e as f,f as o,g as D,p as N,h as V,T as x,_ as L}from"./index-3d9134b1.js";const d=u=>(N("data-v-c158e7d1"),u=u(),V(),u),M={class:"container"},B=d(()=>t("h1",null,"Dashboard",-1)),E={key:0,hidden:""},G={class:"table"},C=d(()=>t("thead",null,[t("tr",null,[t("th",null,"Title"),t("th",null,"Date"),t("th",null,"Start"),t("th",null,"End"),t("th",null,"Duration")])],-1)),F=d(()=>t("td",{colspan:"4"},"Total",-1)),J={key:1},O={class:"groups"},$=d(()=>t("br",null,null,-1)),j={class:"table"},q=d(()=>t("thead",null,[t("tr",null,[t("th",null,"Start"),t("th",null,"End"),t("th",null,"Duration")])],-1)),z={key:2,class:"title"},A=d(()=>t("h2",null,"No trackings yet",-1)),H=[A],K=d(()=>t("br",null,null,-1)),P=I({__name:"DashboardView",setup(u){const i=m([]),c=m([]);async function v(){const n=sessionStorage.getItem("groupedTrackings");n&&n!=="[]"&&(c.value=JSON.parse(n));const a=new x(S),{data:e}=await a.getTrackingGroups();c.value=e,sessionStorage.setItem("groupedTrackings",JSON.stringify(e))}function g(n){if(!n.end)return"in progress";const a=new Date(n.start),s=new Date(n.end).getTime()-a.getTime();return h(s)}function h(n){n=new Date(n).getTime();const a=Math.floor(n/1e3/60/60),e=Math.floor(n/1e3/60)%60,s=Math.floor(n/1e3)%60;return[a,e,s].map(y=>String(y).padStart(2,"0")).join(":")}function _(n){if(n)return new Date(n).toLocaleTimeString().slice(0,8)}function b(n){let a=new Date(n.start).toLocaleDateString();if(n.end){let e=new Date(n.end).toLocaleDateString();return a===e?a:`${a} - ${e}`}return a}return k(async()=>{var e;w.show();const{data:n,error:a}=await S.auth.getSession();n&&((e=n.session)==null||e.user,v().then(()=>{w.hide()}))}),(n,a)=>(l(),r("div",M,[B,i.value.length!==0?(l(),r("div",E,[t("table",G,[C,t("tbody",null,[(l(!0),r(p,null,f(i.value,e=>(l(),r("tr",{key:e.id},[t("td",null,o(e.title),1),t("td",null,o(b(e)),1),t("td",null,o(_(e.start)),1),t("td",null,o(e.end?_(e.end):""),1),t("td",null,o(g(e)),1)]))),128))]),t("tfoot",null,[t("tr",null,[F,t("td",null,o(h(i.value.map(e=>e.end?new Date(e.end).getTime()-new Date(e.start).getTime():0).reduce((e,s)=>e+s,0))),1)])])])])):D("",!0),c.value.length!==0?(l(),r("div",J,[(l(!0),r(p,null,f(c.value,e=>(l(),r("div",O,[$,t("h2",null,o(e[0].title)+" on "+o(e[0].end?new Date(e[0].end).toDateString():"")+" ("+o(h(e.map(s=>s.end?new Date(s.end).getTime()-new Date(s.start).getTime():0).reduce((s,T)=>s+T,0)))+")",1),t("table",j,[q,t("tbody",null,[(l(!0),r(p,null,f(e,s=>(l(),r("tr",{key:s.id},[t("td",null,o(_(s.start)),1),t("td",null,o(s.end?_(s.end):""),1),t("td",null,o(g(s)),1)]))),128))])])]))),256))])):D("",!0),i.value.length===0?(l(),r("div",z,H)):D("",!0),K]))}});const R=L(P,[["__scopeId","data-v-c158e7d1"]]);export{R as default};
