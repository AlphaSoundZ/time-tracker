import{d as w,r as S,o as v,s as l,c as d,a as t,F as y,b as T,e as c,t as s,p as x,f as I,_ as L}from"./index-2e669519.js";const _=o=>(x("data-v-1d044d2e"),o=o(),I(),o),M={class:"container"},V=_(()=>t("h1",{class:"title"},"Time Tracker",-1)),B={class:"table"},C=_(()=>t("thead",null,[t("tr",null,[t("th",null,"Title"),t("th",null,"Date"),t("th",null,"Start"),t("th",null,"End"),t("th",null,"Duration")])],-1)),E=w({__name:"DashboardView",setup(o){const u=S([]);async function h(){const{data:e}=await l.from("trackings").select();u.value=e}function p(e){if(!e.end)return"in progress";const a=new Date(e.start),r=new Date(e.end).getTime()-a.getTime(),m=Math.floor(r/1e3/60/60),D=Math.floor(r/1e3/60)%60,g=Math.floor(r/1e3)%60;return[m,D,g].map(b=>String(b).padStart(2,"0")).join(":")}function i(e){if(e)return new Date(e).toLocaleTimeString().split(" ")[0]}function f(e){let a=new Date(e.start).toLocaleDateString();if(e.end){let n=new Date(e.end).toLocaleDateString();return a===n?a:`${a} - ${n}`}return a}return v(async()=>{const{data:{user:e}}=await l.auth.getUser();e?(h(),l.channel("any").on("postgres_changes",{event:"*",schema:"public",table:"trackings"},a=>{console.log("Change received!",a)}).subscribe()):console.log("not logged in")}),(e,a)=>(c(),d("div",M,[V,t("table",B,[C,t("tbody",null,[(c(!0),d(y,null,T(u.value,n=>(c(),d("tr",{key:n.id},[t("td",null,s(n.title),1),t("td",null,s(f(n)),1),t("td",null,s(i(n.start)),1),t("td",null,s(n.end?i(n.end):""),1),t("td",null,s(p(n)),1)]))),128))])])]))}});const j=L(E,[["__scopeId","data-v-1d044d2e"]]);export{j as default};
