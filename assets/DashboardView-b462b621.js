import{d as b,r as v,o as y,t as f,s as i,a as l,c as d,b as n,F as T,e as S,f as o,g as p,p as V,h as x,_ as I}from"./index-3f378d84.js";const u=c=>(V("data-v-005e9d0e"),c=c(),x(),c),L={class:"container"},M=u(()=>n("h1",null,"Dashboard",-1)),B={key:0},N={class:"table"},C=u(()=>n("thead",null,[n("tr",null,[n("th",null,"Title"),n("th",null,"Date"),n("th",null,"Start"),n("th",null,"End"),n("th",null,"Duration")])],-1)),E=u(()=>n("td",{colspan:"4"},"Total",-1)),F={key:1,class:"title"},$=u(()=>n("h2",null,"No trackings yet",-1)),j=[$],q=u(()=>n("br",null,null,-1)),z=b({__name:"DashboardView",setup(c){const s=v([]);async function m(){const{data:t}=await i.from("trackings").select().order("start",{ascending:!1});s.value=t,i.channel("any").on("postgres_changes",{event:"*",schema:"public",table:"trackings"},async a=>{const{data:e}=await i.from("trackings").select().order("start",{ascending:!1});s.value=e}).subscribe()}function D(t){if(!t.end)return"in progress";const a=new Date(t.start),r=new Date(t.end).getTime()-a.getTime();return _(r)}function _(t){t=new Date(t).getTime();const a=Math.floor(t/1e3/60/60),e=Math.floor(t/1e3/60)%60,r=Math.floor(t/1e3)%60;return[a,e,r].map(w=>String(w).padStart(2,"0")).join(":")}function h(t){if(t)return new Date(t).toLocaleTimeString().slice(0,8)}function g(t){let a=new Date(t.start).toLocaleDateString();if(t.end){let e=new Date(t.end).toLocaleDateString();return a===e?a:`${a} - ${e}`}return a}return y(async()=>{var e;f.show();const{data:t,error:a}=await i.auth.getSession();t&&((e=t.session)==null||e.user,m().then(()=>{f.hide()}))}),(t,a)=>(l(),d("div",L,[M,s.value.length!==0?(l(),d("div",B,[n("table",N,[C,n("tbody",null,[(l(!0),d(T,null,S(s.value,e=>(l(),d("tr",{key:e.id},[n("td",null,o(e.title),1),n("td",null,o(g(e)),1),n("td",null,o(h(e.start)),1),n("td",null,o(e.end?h(e.end):""),1),n("td",null,o(D(e)),1)]))),128))]),n("tfoot",null,[n("tr",null,[E,n("td",null,o(_(s.value.map(e=>e.end?new Date(e.end).getTime()-new Date(e.start).getTime():0).reduce((e,r)=>e+r,0))),1)])])])])):p("",!0),s.value.length===0?(l(),d("div",F,j)):p("",!0),q]))}});const H=I(z,[["__scopeId","data-v-005e9d0e"]]);export{H as default};
